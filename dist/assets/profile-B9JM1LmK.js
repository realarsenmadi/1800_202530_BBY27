import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{e as u,o as f,d as p,b as y,j as h,a as w,l as E,m as v}from"./firebaseConfig-CLJOI27O.js";const I=document.getElementById("profile-form"),c=document.getElementById("name"),i=document.getElementById("email"),m=document.getElementById("password"),l=document.getElementById("theme-toggle"),b=document.getElementById("logout-btn");let n=!1;localStorage.getItem("theme")==="dark"&&(document.body.classList.add("dark-mode"),l.checked=!0);l.addEventListener("change",()=>{l.checked?(document.body.classList.add("dark-mode"),localStorage.setItem("theme","dark")):(document.body.classList.remove("dark-mode"),localStorage.setItem("theme","light"))});b.addEventListener("click",async()=>{try{n=!0,await u.signOut(),alert("Logged out successfully!"),window.location.href="index.html"}catch(e){console.error("Error logging out:",e),alert("Error logging out: "+e.message)}finally{n=!1}});f(u,async e=>{if(!e){n||(alert("Please log in to view your profile."),window.location.href="login.html");return}const s=p(y,"users",e.uid),r=await h(s);if(r.exists()){const t=r.data();c.value=t.name||""}i.value=e.email||"",I.addEventListener("submit",async t=>{t.preventDefault();const g=c.value.trim(),a=i.value.trim(),d=m.value.trim();try{await w(s,{name:g,email:a,updatedAt:new Date},{merge:!0}),a!==e.email&&(await E(e,a),console.log("Login email updated successfully")),d.length>0&&(await v(e,d),console.log("Password updated successfully")),alert("Profile updated successfully!"),m.value=""}catch(o){console.error("Error updating profile:",o),o.code==="auth/requires-recent-login"?alert("Please re-login before changing your email or password."):alert("Error: "+o.message)}})});
