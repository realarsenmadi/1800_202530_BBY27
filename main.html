<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SureSpot</title>
    <style>
      .navbar {
        display: grid !important;
        grid-template-columns: 1fr auto 1fr !important;
        align-items: center;
      }

      .navbar > div:first-child {
        justify-self: start;
      }

      .navbar > div:nth-child(2) {
        justify-self: center;
      }

      .navbar > div:last-child {
        justify-self: end;
      }
    </style>
    <meta name="comp1800 template" content="My 1800 App" />

    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- MapLibre GL JS -->
    <link
      href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>

    <!-- Link to your styles -->
    <link rel="stylesheet" href="./styles/style.css" />
  </head>

  <body class="main-page">
    <!-- Navigation bar -->
    <nav class="navbar">
      <div>
        <!--Last Updated-->
        <div id="lastUpdatedDisplay">Last updated:‚Ä¶</div>
      </div>
      <div>
        <h1 class="app-title">SureSpot</h1>
      </div>
      <div>
        <a href="#">
          <img src="./images/home_icon.png" alt="Home Icon" class="home-icon" />
        </a>
      </div>
    </nav>
    <!-- ========== Parking Availability Legend ========== -->
    <div class="parking-legend">
      <div class="legend-title">Parking Status</div>
      <div class="legend-item">
        <div class="legend-color" style="background-color: #22c55e"></div>
        <span>Available</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background-color: #ef4444"></div>
        <span>Full</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background-color: #f59e0b"></div>
        <span>Closed</span>
      </div>
      <div class="legend-item">
        <div class="legend-color" style="background-color: #808080"></div>
        <span>No Data</span>
      </div>
    </div>

    <!-- Map Container -->
    <div id="map"></div>

    <!-- Filters, My Location & Search (floating above map) -->
    <div class="search-functions">
      <!-- Filters -->
      <div>
        <img src="./images/Filters.png" alt="Filter Icon" class="filter-icon" />
      </div>

      <!-- My Location -->
      <div>
        <img
          src="./images/Location.png"
          alt="My Location Button"
          class="location-button"
          id="locateBtn"
        />
      </div>

      <!-- Search -->
      <div>
        <img
          src="./images/Search.png"
          alt="Search Button"
          class="search-button"
          id="searchBtn"
        />
      </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Search Location</h3>
          <button id="closeModal">&times;</button>
        </div>

        <div class="search-input-container">
          <input
            type="text"
            id="locationInput"
            placeholder="Enter address or place name..."
          />
        </div>

        <div id="searchResults"></div>
      </div>
    </div>

    <!-- Filter Modal -->
    <div id="filterModal">
      <div class="filter-modal-content">
        <div class="filter-modal-header">
          <h3>Filter Parking Lots</h3>
          <button id="closeFilterModal">&times;</button>
        </div>

        <div class="filter-options">
          <label class="filter-option">
            <input type="radio" name="parkingFilter" value="available" />
            <span class="filter-label">
              <span
                class="filter-indicator"
                style="background-color: #22c55e"
              ></span>
              Show Available Only
            </span>
          </label>

          <label class="filter-option">
            <input type="radio" name="parkingFilter" value="full" />
            <span class="filter-label">
              <span
                class="filter-indicator"
                style="background-color: #ef4444"
              ></span>
              Show Full Only
            </span>
          </label>
        </div>

        <div class="filter-buttons">
          <button id="applyFilter" class="filter-btn apply-btn">
            Apply Filter
          </button>
          <button id="clearFilter" class="filter-btn clear-btn">
            Show All
          </button>
        </div>
      </div>
    </div>
    <!-- ========== : Parking Report Modal ========== -->
    <div id="reportModal" class="report-modal">
      <div class="report-modal-content">
        <button id="closeReportModal" class="close-report-btn">&times;</button>
        <h2 class="report-modal-title">
          ‚ö†Ô∏èSafety Notice: Please do NOT use SureSpot while driving.
        </h2>
        <hr />
        <h3 class="report-modal-title">üÖøÔ∏è Parking Availability</h3>
        <p id="modalLocationName" class="report-modal-text">
          Are there parking spots available here?
        </p>
        <div class="report-button-group">
          <button class="report-button available">‚úÖ Available</button>
          <button class="report-button full">‚ùå Full</button>
        </div>
      </div>
    </div>

    <!-- Favourites Modal -->
    <div id="favouritesModal">
      <div class="fav-modal-content">
        <div class="fav-modal-header">
          <h3>Your Favourites</h3>
          <button id="closeFavourites">&times;</button>
        </div>
        <ul id="favouritesList"></ul>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <nav class="bottom-nav">
        <div>
          <a href="profile.html">
            <img
              src="./images/Profile.png"
              alt="Profile Icon"
              class="profile-icon"
            />
          </a>
        </div>
        <div>
          <a href="#" id="openFavourites">
            <img
              src="./images/Favourites.png"
              alt="Favourites Icon"
              class="favourites-icon"
            />
          </a>
        </div>
        <div>
          <a href="faq.html">
            <img src="./images/Help.png" alt="Help Icon" class="help-icon" />
          </a>
        </div>
      </nav>
    </footer>

    <!-- Load main script -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
